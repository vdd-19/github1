<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>game-match</title>
    <link rel="stylesheet" href="match.css">
</head>
<body>
    <h1>Memory Match Game</h1>
    <div id="game"></div>
    <div id="move">move: 0</div>
    <button id="restart">Restart</button>
    <script>
    const gameContainer = document.getElementById('game');
    const movesDisplay = document.getElementById('moves');
    const restartBtn = document.getElementById('restart');

    let cardValues = [];  // will hold pairs
    let firstCard = null;
    let secondCard = null;
    let lockBoard = false;
    let movesCount = 0;
    let matchedCount = 0;

    function initGame() {
      // Reset variables
      gameContainer.innerHTML = '';
      movesCount = 0;
      matchedCount = 0;
      movesDisplay.textContent = 'Moves: 0';
      firstCard = null;
      secondCard = null;
      lockBoard = false;

      // choose some card values (you can use images or icons instead of numbers)
      const values = [1,2,3,4,5,6,7,8]; // for 8 pairs = 16 cards
      cardValues = [...values, ...values]; 
      shuffleArray(cardValues);

      // create cards in DOM
      cardValues.forEach((value, index) => {
        const card = document.createElement('div');
        card.classList.add('card');
        card.dataset.value = value;

        const front = document.createElement('div');
        front.classList.add('front');
        front.textContent = value;

        const back = document.createElement('div');
        back.classList.add('back');
        back.textContent = '?';

        card.append(back, front);

        card.addEventListener('click', onCardClick);

        gameContainer.appendChild(card);
      });
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function onCardClick(event) {
      if (lockBoard) return;
      const clicked = event.currentTarget;
      if (clicked === firstCard) return;
      if (clicked.classList.contains('matched')) return;

      clicked.classList.add('flipped');

      if (!firstCard) {
        firstCard = clicked;
        return;
      }

      secondCard = clicked;
      movesCount++;
      movesDisplay.textContent = `Moves: ${movesCount}`;
      lockBoard = true;

      checkForMatch();
    }

    function checkForMatch() {
      const isMatch = firstCard.dataset.value === secondCard.dataset.value;
      if (isMatch) {
        firstCard.classList.add('matched');
        secondCard.classList.add('matched');
        matchedCount += 2;
        resetTurn();
        if (matchedCount === cardValues.length) {
          setTimeout(() => {
            alert(`You won in ${movesCount} moves!`);
          }, 200);
        }
      } else {
        setTimeout(() => {
          firstCard.classList.remove('flipped');
          secondCard.classList.remove('flipped');
          resetTurn();
        }, 1000);
      }
    }

    function resetTurn() {
      firstCard = null;
      secondCard = null;
      lockBoard = false;
    }

    restartBtn.addEventListener('click', initGame);

    // initialize for first time
    initGame();
   </script>
</body>
</html>
